{"ast":null,"code":"var _jsxFileName = \"/Users/hyphens/Desktop/AvatarAnalyzer/chat-app/src/components/ChatInterface.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport ReactMarkdown from 'react-markdown';\nimport { InlineMath, BlockMath } from 'react-katex';\nimport { Upload, Send, Loader2, Image, MessageSquare, CheckCircle, AlertCircle } from 'lucide-react';\nimport './ChatInterface.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatInterface = ({\n  apiKey\n}) => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [currentInput, setCurrentInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentImage, setCurrentImage] = useState(null);\n  const messagesEndRef = useRef(null);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const onDrop = async acceptedFiles => {\n    const file = acceptedFiles[0];\n    if (!file) return;\n    setCurrentImage(file);\n    setIsLoading(true);\n    try {\n      // Add image message\n      const imageMessage = {\n        id: Date.now(),\n        type: 'image',\n        content: file,\n        timestamp: new Date(),\n        sender: 'user'\n      };\n      setMessages(prev => [...prev, imageMessage]);\n\n      // Analyze image with OCR\n      const ocrResult = await analyzeImage(file);\n\n      // Add OCR result message\n      const ocrMessage = {\n        id: Date.now() + 1,\n        type: 'ocr',\n        content: ocrResult,\n        timestamp: new Date(),\n        sender: 'assistant'\n      };\n      setMessages(prev => [...prev, ocrMessage]);\n\n      // Generate question based on OCR result\n      const questionResult = await generateQuestion(ocrResult);\n\n      // Add question message\n      const questionMessage = {\n        id: Date.now() + 2,\n        type: 'question',\n        content: questionResult,\n        timestamp: new Date(),\n        sender: 'assistant'\n      };\n      setMessages(prev => [...prev, questionMessage]);\n    } catch (error) {\n      console.error('Error processing image:', error);\n      const errorMessage = {\n        id: Date.now(),\n        type: 'error',\n        content: 'Sorry, there was an error processing your image. Please try again.',\n        timestamp: new Date(),\n        sender: 'assistant'\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.jpeg', '.jpg', '.png', '.gif', '.bmp', '.webp']\n    },\n    multiple: false\n  });\n  const analyzeImage = async file => {\n    const formData = new FormData();\n    formData.append('image', file);\n    formData.append('apiKey', apiKey);\n    const response = await fetch('/api/analyze-image', {\n      method: 'POST',\n      body: formData\n    });\n    if (!response.ok) {\n      throw new Error('Failed to analyze image');\n    }\n    return await response.json();\n  };\n  const generateQuestion = async ocrResult => {\n    const response = await fetch('/api/generate-question', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        ocrResult,\n        apiKey\n      })\n    });\n    if (!response.ok) {\n      throw new Error('Failed to generate question');\n    }\n    return await response.json();\n  };\n  const generateFeedback = async (userAnswer, questionData) => {\n    const response = await fetch('/api/generate-feedback', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userAnswer,\n        questionData,\n        apiKey\n      })\n    });\n    if (!response.ok) {\n      throw new Error('Failed to generate feedback');\n    }\n    return await response.json();\n  };\n  const handleSendMessage = async () => {\n    if (!currentInput.trim() || isLoading) return;\n    const userMessage = {\n      id: Date.now(),\n      type: 'text',\n      content: currentInput,\n      timestamp: new Date(),\n      sender: 'user'\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setCurrentInput('');\n    setIsLoading(true);\n    try {\n      // Find the last question message to get context\n      const lastQuestionMessage = messages.slice().reverse().find(msg => msg.type === 'question');\n      if (lastQuestionMessage) {\n        const feedbackResult = await generateFeedback(currentInput, lastQuestionMessage.content);\n        const feedbackMessage = {\n          id: Date.now() + 1,\n          type: 'feedback',\n          content: feedbackResult,\n          timestamp: new Date(),\n          sender: 'assistant'\n        };\n        setMessages(prev => [...prev, feedbackMessage]);\n      }\n    } catch (error) {\n      console.error('Error generating feedback:', error);\n      const errorMessage = {\n        id: Date.now() + 1,\n        type: 'error',\n        content: 'Sorry, there was an error generating feedback. Please try again.',\n        timestamp: new Date(),\n        sender: 'assistant'\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const renderMessage = message => {\n    const isUser = message.sender === 'user';\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `message ${isUser ? 'user' : 'assistant'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-avatar\",\n        children: isUser ? 'ðŸ‘¤' : 'ðŸ¤–'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-content\",\n        children: [message.type === 'image' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-message\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: URL.createObjectURL(message.content),\n            alt: \"Uploaded content\",\n            className: \"uploaded-image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this), message.type === 'ocr' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ocr-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-header\",\n            children: [/*#__PURE__*/_jsxDEV(Image, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Extracted Content\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ocr-content\",\n            children: [message.content.text && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Text:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: message.content.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 19\n            }, this), message.content.latex && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"latex-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Formulas:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(BlockMath, {\n                math: message.content.latex\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this), message.type === 'question' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"question-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-header\",\n            children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Generated Question\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"question-content\",\n            children: [/*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              children: message.content.question\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this), message.content.latex && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"question-latex\",\n              children: /*#__PURE__*/_jsxDEV(BlockMath, {\n                math: message.content.latex\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this), message.type === 'text' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-message\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: message.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this), message.type === 'feedback' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feedback-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-header\",\n            children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Feedback & Follow-up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"feedback-content\",\n            children: [/*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              children: message.content.feedback\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this), message.content.followUpQuestion && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"follow-up-question\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Follow-up Question:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                children: message.content.followUpQuestion\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 13\n        }, this), message.type === 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-header\",\n            children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Error\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: message.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-timestamp\",\n          children: message.timestamp.toLocaleTimeString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)]\n    }, message.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-interface\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-container\",\n        children: [messages.length === 0 && !isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"upload-area\",\n            ...getRootProps(),\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              ...getInputProps()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Upload, {\n              size: 48\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Upload an Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Drag and drop an image here, or click to select\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"upload-hint\",\n              children: \"Supports: JPG, PNG, GIF, BMP, WebP\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this), messages.map(renderMessage), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message assistant\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-avatar\",\n            children: \"\\uD83E\\uDD16\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-content\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-message\",\n              children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                size: 16,\n                className: \"animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Processing...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: currentInput,\n            onChange: e => setCurrentInput(e.target.value),\n            onKeyPress: handleKeyPress,\n            placeholder: \"Type your answer here...\",\n            disabled: isLoading,\n            rows: 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"upload-button\",\n              onClick: () => {\n                var _document$querySelect;\n                return (_document$querySelect = document.querySelector('input[type=\"file\"]')) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.click();\n              },\n              disabled: isLoading,\n              title: \"Upload Image\",\n              children: /*#__PURE__*/_jsxDEV(Upload, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"send-button\",\n              onClick: handleSendMessage,\n              disabled: !currentInput.trim() || isLoading,\n              children: /*#__PURE__*/_jsxDEV(Send, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-hint\",\n          children: \"Press Enter to send, Shift+Enter for new line\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        ...getRootProps(),\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          ...getInputProps()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 304,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatInterface, \"02J1j8DjMafYx4E5Sj5+zy1aRU0=\", false, function () {\n  return [useDropzone];\n});\n_c = ChatInterface;\nexport default ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useDropzone","ReactMarkdown","InlineMath","BlockMath","Upload","Send","Loader2","Image","MessageSquare","CheckCircle","AlertCircle","jsxDEV","_jsxDEV","ChatInterface","apiKey","_s","messages","setMessages","currentInput","setCurrentInput","isLoading","setIsLoading","currentImage","setCurrentImage","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","onDrop","acceptedFiles","file","imageMessage","id","Date","now","type","content","timestamp","sender","prev","ocrResult","analyzeImage","ocrMessage","questionResult","generateQuestion","questionMessage","error","console","errorMessage","getRootProps","getInputProps","isDragActive","accept","multiple","formData","FormData","append","response","fetch","method","body","ok","Error","json","headers","JSON","stringify","generateFeedback","userAnswer","questionData","handleSendMessage","trim","userMessage","lastQuestionMessage","slice","reverse","find","msg","feedbackResult","feedbackMessage","handleKeyPress","e","key","shiftKey","preventDefault","renderMessage","message","isUser","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","URL","createObjectURL","alt","size","text","latex","math","question","feedback","followUpQuestion","toLocaleTimeString","length","map","ref","value","onChange","target","onKeyPress","placeholder","disabled","rows","onClick","_document$querySelect","document","querySelector","click","title","style","display","_c","$RefreshReg$"],"sources":["/Users/hyphens/Desktop/AvatarAnalyzer/chat-app/src/components/ChatInterface.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport ReactMarkdown from 'react-markdown';\nimport { InlineMath, BlockMath } from 'react-katex';\nimport { Upload, Send, Loader2, Image, MessageSquare, CheckCircle, AlertCircle } from 'lucide-react';\nimport './ChatInterface.css';\n\nconst ChatInterface = ({ apiKey }) => {\n  const [messages, setMessages] = useState([]);\n  const [currentInput, setCurrentInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentImage, setCurrentImage] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const onDrop = async (acceptedFiles) => {\n    const file = acceptedFiles[0];\n    if (!file) return;\n\n    setCurrentImage(file);\n    setIsLoading(true);\n\n    try {\n      // Add image message\n      const imageMessage = {\n        id: Date.now(),\n        type: 'image',\n        content: file,\n        timestamp: new Date(),\n        sender: 'user'\n      };\n      setMessages(prev => [...prev, imageMessage]);\n\n      // Analyze image with OCR\n      const ocrResult = await analyzeImage(file);\n      \n      // Add OCR result message\n      const ocrMessage = {\n        id: Date.now() + 1,\n        type: 'ocr',\n        content: ocrResult,\n        timestamp: new Date(),\n        sender: 'assistant'\n      };\n      setMessages(prev => [...prev, ocrMessage]);\n\n      // Generate question based on OCR result\n      const questionResult = await generateQuestion(ocrResult);\n      \n      // Add question message\n      const questionMessage = {\n        id: Date.now() + 2,\n        type: 'question',\n        content: questionResult,\n        timestamp: new Date(),\n        sender: 'assistant'\n      };\n      setMessages(prev => [...prev, questionMessage]);\n\n    } catch (error) {\n      console.error('Error processing image:', error);\n      const errorMessage = {\n        id: Date.now(),\n        type: 'error',\n        content: 'Sorry, there was an error processing your image. Please try again.',\n        timestamp: new Date(),\n        sender: 'assistant'\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.jpeg', '.jpg', '.png', '.gif', '.bmp', '.webp']\n    },\n    multiple: false\n  });\n\n  const analyzeImage = async (file) => {\n    const formData = new FormData();\n    formData.append('image', file);\n    formData.append('apiKey', apiKey);\n\n    const response = await fetch('/api/analyze-image', {\n      method: 'POST',\n      body: formData\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to analyze image');\n    }\n\n    return await response.json();\n  };\n\n  const generateQuestion = async (ocrResult) => {\n    const response = await fetch('/api/generate-question', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        ocrResult,\n        apiKey\n      })\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to generate question');\n    }\n\n    return await response.json();\n  };\n\n  const generateFeedback = async (userAnswer, questionData) => {\n    const response = await fetch('/api/generate-feedback', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        userAnswer,\n        questionData,\n        apiKey\n      })\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to generate feedback');\n    }\n\n    return await response.json();\n  };\n\n  const handleSendMessage = async () => {\n    if (!currentInput.trim() || isLoading) return;\n\n    const userMessage = {\n      id: Date.now(),\n      type: 'text',\n      content: currentInput,\n      timestamp: new Date(),\n      sender: 'user'\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setCurrentInput('');\n    setIsLoading(true);\n\n    try {\n      // Find the last question message to get context\n      const lastQuestionMessage = messages\n        .slice()\n        .reverse()\n        .find(msg => msg.type === 'question');\n\n      if (lastQuestionMessage) {\n        const feedbackResult = await generateFeedback(currentInput, lastQuestionMessage.content);\n        \n        const feedbackMessage = {\n          id: Date.now() + 1,\n          type: 'feedback',\n          content: feedbackResult,\n          timestamp: new Date(),\n          sender: 'assistant'\n        };\n        setMessages(prev => [...prev, feedbackMessage]);\n      }\n    } catch (error) {\n      console.error('Error generating feedback:', error);\n      const errorMessage = {\n        id: Date.now() + 1,\n        type: 'error',\n        content: 'Sorry, there was an error generating feedback. Please try again.',\n        timestamp: new Date(),\n        sender: 'assistant'\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const renderMessage = (message) => {\n    const isUser = message.sender === 'user';\n    \n    return (\n      <div key={message.id} className={`message ${isUser ? 'user' : 'assistant'}`}>\n        <div className=\"message-avatar\">\n          {isUser ? 'ðŸ‘¤' : 'ðŸ¤–'}\n        </div>\n        <div className=\"message-content\">\n          {message.type === 'image' && (\n            <div className=\"image-message\">\n              <img \n                src={URL.createObjectURL(message.content)} \n                alt=\"Uploaded content\"\n                className=\"uploaded-image\"\n              />\n            </div>\n          )}\n          \n          {message.type === 'ocr' && (\n            <div className=\"ocr-message\">\n              <div className=\"message-header\">\n                <Image size={16} />\n                <span>Extracted Content</span>\n              </div>\n              <div className=\"ocr-content\">\n                {message.content.text && (\n                  <div className=\"text-content\">\n                    <h4>Text:</h4>\n                    <p>{message.content.text}</p>\n                  </div>\n                )}\n                {message.content.latex && (\n                  <div className=\"latex-content\">\n                    <h4>Formulas:</h4>\n                    <BlockMath math={message.content.latex} />\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n          \n          {message.type === 'question' && (\n            <div className=\"question-message\">\n              <div className=\"message-header\">\n                <MessageSquare size={16} />\n                <span>Generated Question</span>\n              </div>\n              <div className=\"question-content\">\n                <ReactMarkdown>{message.content.question}</ReactMarkdown>\n                {message.content.latex && (\n                  <div className=\"question-latex\">\n                    <BlockMath math={message.content.latex} />\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n          \n          {message.type === 'text' && (\n            <div className=\"text-message\">\n              <p>{message.content}</p>\n            </div>\n          )}\n          \n          {message.type === 'feedback' && (\n            <div className=\"feedback-message\">\n              <div className=\"message-header\">\n                <CheckCircle size={16} />\n                <span>Feedback & Follow-up</span>\n              </div>\n              <div className=\"feedback-content\">\n                <ReactMarkdown>{message.content.feedback}</ReactMarkdown>\n                {message.content.followUpQuestion && (\n                  <div className=\"follow-up-question\">\n                    <h4>Follow-up Question:</h4>\n                    <ReactMarkdown>{message.content.followUpQuestion}</ReactMarkdown>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n          \n          {message.type === 'error' && (\n            <div className=\"error-message\">\n              <div className=\"message-header\">\n                <AlertCircle size={16} />\n                <span>Error</span>\n              </div>\n              <p>{message.content}</p>\n            </div>\n          )}\n          \n          <div className=\"message-timestamp\">\n            {message.timestamp.toLocaleTimeString()}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"chat-interface\">\n      <div className=\"chat-container\">\n        <div className=\"messages-container\">\n          {messages.length === 0 && !isLoading && (\n            <div className=\"empty-state\">\n              <div className=\"upload-area\" {...getRootProps()}>\n                <input {...getInputProps()} />\n                <Upload size={48} />\n                <h3>Upload an Image</h3>\n                <p>Drag and drop an image here, or click to select</p>\n                <p className=\"upload-hint\">Supports: JPG, PNG, GIF, BMP, WebP</p>\n              </div>\n            </div>\n          )}\n          \n          {messages.map(renderMessage)}\n          \n          {isLoading && (\n            <div className=\"message assistant\">\n              <div className=\"message-avatar\">ðŸ¤–</div>\n              <div className=\"message-content\">\n                <div className=\"loading-message\">\n                  <Loader2 size={16} className=\"animate-spin\" />\n                  <span>Processing...</span>\n                </div>\n              </div>\n            </div>\n          )}\n          \n          <div ref={messagesEndRef} />\n        </div>\n        \n        <div className=\"input-container\">\n          <div className=\"input-wrapper\">\n            <textarea\n              value={currentInput}\n              onChange={(e) => setCurrentInput(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder=\"Type your answer here...\"\n              disabled={isLoading}\n              rows={1}\n            />\n            <div className=\"input-actions\">\n              <button\n                className=\"upload-button\"\n                onClick={() => document.querySelector('input[type=\"file\"]')?.click()}\n                disabled={isLoading}\n                title=\"Upload Image\"\n              >\n                <Upload size={20} />\n              </button>\n              <button\n                className=\"send-button\"\n                onClick={handleSendMessage}\n                disabled={!currentInput.trim() || isLoading}\n              >\n                <Send size={20} />\n              </button>\n            </div>\n          </div>\n          <div className=\"input-hint\">\n            Press Enter to send, Shift+Enter for new line\n          </div>\n        </div>\n      </div>\n      \n      {/* Hidden dropzone for the upload button */}\n      <div style={{ display: 'none' }}>\n        <div {...getRootProps()}>\n          <input {...getInputProps()} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatInterface;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}